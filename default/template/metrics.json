{"apiVersion":"v1","kind":"Template","labels":{},"metadata":{"annotations":{"description":"Provides centralised historical [Metrics](http://fabric8.io/guide/metrics.html) using [InfluxDB](http://influxdb.com/) as the back end and [Grafana](http://grafana.org/) as the front end","fabric8.influxdb/summary":"[InfluxDB](http://influxdb.com/) database for storing historical metrics","fabric8.influxdb/iconUrl":"https://cdn.rawgit.com/fabric8io/quickstarts/master/apps/influxdb/src/main/fabric8/icon.png","fabric8.grafana/iconUrl":"https://cdn.rawgit.com/fabric8io/quickstarts/master/apps/grafana/src/main/fabric8/icon.png","fabric8.grafana/summary":"[Grafana](http://grafana.org/) console for viewing metrics stored in InfluxDB or Cassandra","fabric8.heapster/iconUrl":"https://cdn.rawgit.com/fabric8io/quickstarts/master/apps/heapster/src/main/fabric8/icon.svg","fabric8.heapster/summary":"Heapster enables monitoring of Clusters using cAdvisor.","fabric8.metrics/summary":"Sonatype helps open source projects to set up Maven repositories on https://oss.sonatype.org/","fabric8.metrics/iconUrl":"https://cdn.rawgit.com/fabric8io/quickstarts/master/app-groups/metrics/src/main/fabric8/icon.png"},"labels":{},"name":"metrics"},"objects":[{"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"component":"grafana","provider":"fabric8"},"name":"grafana"},"spec":{"deprecatedPublicIPs":[],"ports":[{"port":80,"protocol":"TCP","targetPort":"http"}],"selector":{"component":"grafana","provider":"fabric8"},"type":"LoadBalancer"}},{"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"component":"influxdb","provider":"fabric8"},"name":"influxdb"},"spec":{"deprecatedPublicIPs":[],"ports":[{"port":8086,"protocol":"TCP","targetPort":8086}],"selector":{"component":"influxdb","provider":"fabric8"},"type":"LoadBalancer"}},{"apiVersion":"v1","kind":"ReplicationController","metadata":{"annotations":{},"labels":{"component":"grafana","provider":"fabric8"},"name":"grafana"},"spec":{"replicas":1,"selector":{"component":"grafana","provider":"fabric8"},"template":{"metadata":{"annotations":{},"labels":{"component":"grafana","provider":"fabric8"}},"spec":{"containers":[{"args":[],"command":[],"env":[{"name":"INFLUXDB_SERVICE_NAME","value":"INFLUXDB"},{"name":"GRAFANA_DEFAULT_DASHBOARD","value":"/dashboard/file/kubernetes.json"},{"name":"KUBERNETES_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"image":"docker.io/fabric8/grafana:1.9.1_2","name":"grafana","ports":[{"containerPort":3000,"name":"http"}],"securityContext":{},"volumeMounts":[]}],"imagePullSecrets":[],"nodeSelector":{},"volumes":[]}}}},{"apiVersion":"v1","kind":"ReplicationController","metadata":{"annotations":{},"labels":{"component":"heapster","provider":"fabric8"},"name":"heapster"},"spec":{"replicas":1,"selector":{"component":"heapster","provider":"fabric8"},"template":{"metadata":{"annotations":{},"labels":{"component":"heapster","provider":"fabric8"}},"spec":{"containers":[{"args":["-source=kubernetes:https://kubernetes.default.svc.cluster.local?auth=&insecure=true&useServiceAccount=true","-sink=influxdb:http://influxdb.default.svc.cluster.local:8086"],"command":[],"env":[{"name":"KUBERNETES_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"image":"kubernetes/heapster:V0.14.2","name":"heapster","ports":[],"securityContext":{},"volumeMounts":[]}],"imagePullSecrets":[],"nodeSelector":{},"serviceAccountName":"metrics","volumes":[]}}}},{"apiVersion":"v1","kind":"ReplicationController","metadata":{"annotations":{},"labels":{"component":"influxdb","provider":"fabric8"},"name":"influxdb"},"spec":{"replicas":1,"selector":{"component":"influxdb","provider":"fabric8"},"template":{"metadata":{"annotations":{},"labels":{"component":"influxdb","provider":"fabric8"}},"spec":{"containers":[{"args":[],"command":[],"env":[{"name":"PRE_CREATE_DB","value":"cadvisor;k8s;grafana"},{"name":"KUBERNETES_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"image":"docker.io/fabric8/influxdb:0.8.8","name":"influxdb","ports":[{"containerPort":8083,"name":"admin"},{"containerPort":8086,"name":"api"},{"containerPort":8099,"name":"protobuf"},{"containerPort":8084,"name":"ssl"},{"containerPort":8090,"name":"raft"}],"securityContext":{},"volumeMounts":[{"mountPath":"/data","name":"influxdb-data","readOnly":false}]}],"imagePullSecrets":[],"nodeSelector":{},"volumes":[{"emptyDir":{"medium":""},"name":"influxdb-data"}]}}}}],"parameters":[]}